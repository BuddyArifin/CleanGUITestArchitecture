machine:
   environment:
     GRADLE_OPTS: -Xmx512m -XX:MaxPermSize=512m
     ADB_INSTALL_TIMEOUT: 8
test:
  override:
    # Start the emulator
    - emulator -avd circleci-android22 -no-audio -no-window:
        background: true
        parallel: true
    # Wait for emulator to boot
    - circle-android wait-for-boot
    # Remove the look screen
    - adb shell input keyevent 82
    # Build the code
    - ./gradlew assembleDebug
    # Run tests against the emulator
    - ./gradlew connectedAndroidTest -PdisablePreDex --stacktrace --info
